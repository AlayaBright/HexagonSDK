
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.0.2">
    
    
      
        <title>Googletest Primer - Hexagon SDK</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.38780c08.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.3f72e892.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../css/mermaid.css">
    
      <link rel="stylesheet" href="../../../css/freezeTable.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#googletest-primer" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../../.." title="Hexagon SDK" class="md-header-nav__button md-logo" aria-label="Hexagon SDK">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Hexagon SDK
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Googletest Primer
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Hexagon SDK" class="md-nav__button md-logo" aria-label="Hexagon SDK">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Hexagon SDK
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../index.html" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Tools
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Tools" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tools/setup.html" class="md-nav__link">
      Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tools/build.html" class="md-nav__link">
      Building
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tools/sign.html" class="md-nav__link">
      Device signing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tools/run.html" class="md-nav__link">
      Running
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tools/messaging.html" class="md-nav__link">
      Message logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tools/debug.html" class="md-nav__link">
      Debugging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tools/profile.html" class="md-nav__link">
      Profiling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tools/ide.html" class="md-nav__link">
      Using the IDE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tools/clone.html" class="md-nav__link">
      Project cloning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tools/qhcg.html" class="md-nav__link">
      QHCG
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Software
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Software" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Software
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../software/os/os_support_cpu.html" class="md-nav__link">
      CPU OS build support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../software/os/os_support_dsp.html" class="md-nav__link">
      DSP OS QuRT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../software/system_performance/resource_management.html" class="md-nav__link">
      Resource management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-4" type="checkbox" id="nav-3-4">
    
    <label class="md-nav__link" for="nav-3-4">
      Interprocessor Communication (IPC)
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Interprocessor Communication (IPC)" data-md-level="2">
      <label class="md-nav__title" for="nav-3-4">
        <span class="md-nav__icon md-icon"></span>
        Interprocessor Communication (IPC)
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../software/ipc/rpc.html" class="md-nav__link">
      RPC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../software/ipc/dspqueue.html" class="md-nav__link">
      Asynchronous DSP Packet Queue
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-5" type="checkbox" id="nav-3-5">
    
    <label class="md-nav__link" for="nav-3-5">
      Libraries
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Libraries" data-md-level="2">
      <label class="md-nav__title" for="nav-3-5">
        <span class="md-nav__icon md-icon"></span>
        Libraries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../software/system_libraries/index.html" class="md-nav__link">
      System libraries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../software/hexagon_libraries/index.html" class="md-nav__link">
      Hexagon libraries
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-6" type="checkbox" id="nav-3-6">
    
    <label class="md-nav__link" for="nav-3-6">
      System performance
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="System performance" data-md-level="2">
      <label class="md-nav__title" for="nav-3-6">
        <span class="md-nav__icon md-icon"></span>
        System performance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../software/system_performance/system_optimizations.html" class="md-nav__link">
      System-level optimizations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../software/system_performance/dsp_optimizations.html" class="md-nav__link">
      DSP optimizations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../software/system_integration.html" class="md-nav__link">
      System integration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Examples
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Examples" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../index.html" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../asyncdspq_example/index.html" class="md-nav__link">
      Asyncdspq
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../calculator/index.html" class="md-nav__link">
      Calculator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../calculator_c%2B%2B/index.html" class="md-nav__link">
      Calculator C++
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../calculator_c%2B%2B_apk/index.html" class="md-nav__link">
      Calculator C++ APK
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dspqueue/index.html" class="md-nav__link">
      DSP Packet Queue
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../index.html" class="md-nav__link">
      GTEST
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../hap_example/index.html" class="md-nav__link">
      HAP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lpi_example/index.html" class="md-nav__link">
      LPI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../multithreading/index.html" class="md-nav__link">
      Multithreading
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../profiling/index.html" class="md-nav__link">
      Profiling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../qhl/index.html" class="md-nav__link">
      QHL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../qhl_hvx/index.html" class="md-nav__link">
      QHL HVX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../qprintf/index.html" class="md-nav__link">
      QPRINTF
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Reference
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Reference" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/releases.html" class="md-nav__link">
      About
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/idl.html" class="md-nav__link">
      IDL documentation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/manuals.html" class="md-nav__link">
      Reference manuals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/faq.html" class="md-nav__link">
      FAQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/troubleshooting.html" class="md-nav__link">
      Trouble Shooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/feature_matrix.html" class="md-nav__link">
      Feature matrix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../support.html" class="md-nav__link">
      Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Add-ons
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Add-ons" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Add-ons
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../add-ons/compute.html" class="md-nav__link">
      Compute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../add-ons/audio.html" class="md-nav__link">
      Audio
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../add-ons/eai.html" class="md-nav__link">
      eAI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../add-ons/qnx.html" class="md-nav__link">
      QNX
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction-why-googletest" class="md-nav__link">
    Introduction: Why googletest?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#beware-of-the-nomenclature" class="md-nav__link">
    Beware of the nomenclature
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basic-concepts" class="md-nav__link">
    Basic Concepts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assertions" class="md-nav__link">
    Assertions
  </a>
  
    <nav class="md-nav" aria-label="Assertions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-assertions" class="md-nav__link">
    Basic Assertions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary-comparison" class="md-nav__link">
    Binary Comparison
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#string-comparison" class="md-nav__link">
    String Comparison
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-tests" class="md-nav__link">
    Simple Tests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#same-data-multiple-tests" class="md-nav__link">
    Test Fixtures: Using the Same Data Configuration for Multiple Tests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#invoking-the-tests" class="md-nav__link">
    Invoking the Tests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-the-main-function" class="md-nav__link">
    Writing the main() Function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#known-limitations" class="md-nav__link">
    Known Limitations
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="googletest-primer">Googletest Primer</h1>
<h2 id="introduction-why-googletest">Introduction: Why googletest?</h2>
<p><em>googletest</em> helps you write better C++ tests.</p>
<p>googletest is a testing framework developed by the Testing Technology team with
Google's specific requirements and constraints in mind. Whether you work on
Linux, Windows, or a Mac, if you write C++ code, googletest can help you. And it
supports <em>any</em> kind of tests, not just unit tests.</p>
<p>So what makes a good test, and how does googletest fit in? We believe:</p>
<ol>
<li>Tests should be <em>independent</em> and <em>repeatable</em>. It's a pain to debug a test
    that succeeds or fails as a result of other tests. googletest isolates the
    tests by running each of them on a different object. When a test fails,
    googletest allows you to run it in isolation for quick debugging.</li>
<li>Tests should be well <em>organized</em> and reflect the structure of the tested
    code. googletest groups related tests into test suites that can share data
    and subroutines. This common pattern is easy to recognize and makes tests
    easy to maintain. Such consistency is especially helpful when people switch
    projects and start to work on a new code base.</li>
<li>Tests should be <em>portable</em> and <em>reusable</em>. Google has a lot of code that is
    platform-neutral; its tests should also be platform-neutral. googletest
    works on different OSes, with different compilers, with or without
    exceptions, so googletest tests can work with a variety of configurations.</li>
<li>When tests fail, they should provide as much <em>information</em> about the problem
    as possible. googletest doesn't stop at the first test failure. Instead, it
    only stops the current test and continues with the next. You can also set up
    tests that report non-fatal failures after which the current test continues.
    Thus, you can detect and fix multiple bugs in a single run-edit-compile
    cycle.</li>
<li>The testing framework should liberate test writers from housekeeping chores
    and let them focus on the test <em>content</em>. googletest automatically keeps
    track of all tests defined, and doesn't require the user to enumerate them
    in order to run them.</li>
<li>Tests should be <em>fast</em>. With googletest, you can reuse shared resources
    across tests and pay for the set-up/tear-down only once, without making
    tests depend on each other.</li>
</ol>
<p>Since googletest is based on the popular xUnit architecture, you'll feel right
at home if you've used JUnit or PyUnit before. If not, it will take you about 10
minutes to learn the basics and get started. So let's go!</p>
<h2 id="beware-of-the-nomenclature">Beware of the nomenclature</h2>
<p><em>Note:</em> There might be some confusion arising from different definitions of the
terms <em>Test</em>, <em>Test Case</em> and <em>Test Suite</em>, so beware of misunderstanding these.</p>
<p>Historically, googletest started to use the term <em>Test Case</em> for grouping
related tests, whereas current publications, including International Software
Testing Qualifications Board (<a href="http://www.istqb.org/">ISTQB</a>) materials and
various textbooks on software quality, use the term
<em><a href="http://glossary.istqb.org/en/search/test%20suite">Test Suite</a></em> for this.</p>
<p>The related term <em>Test</em>, as it is used in googletest, corresponds to the term
<em><a href="http://glossary.istqb.org/en/search/test%20case">Test Case</a></em> of ISTQB and others.</p>
<p>The term <em>Test</em> is commonly of broad enough sense, including ISTQB's definition
of <em>Test Case</em>, so it's not much of a problem here. But the term <em>Test Case</em> as
was used in Google Test is of contradictory sense and thus confusing.</p>
<p>googletest recently started replacing the term <em>Test Case</em> with <em>Test Suite</em>.
The preferred API is <em>TestSuite</em>. The older TestCase API is being slowly
deprecated and refactored away.</p>
<p>So please be aware of the different definitions of the terms:</p>
<!-- mdformat off(github rendering does not support multiline tables) -->

<table>
<thead>
<tr>
<th align="left">Meaning</th>
<th align="left">googletest Term</th>
<th align="left"><a href="http://www.istqb.org/">ISTQB</a> Term</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Exercise a particular program path with specific input values and verify the results</td>
<td align="left"><a href="#simple-tests">TEST()</a></td>
<td align="left"><a href="http://glossary.istqb.org/en/search/test%20case">Test Case</a></td>
</tr>
</tbody>
</table>
<!-- mdformat on -->

<h2 id="basic-concepts">Basic Concepts</h2>
<p>When using googletest, you start by writing <em>assertions</em>, which are statements
that check whether a condition is true. An assertion's result can be <em>success</em>,
<em>nonfatal failure</em>, or <em>fatal failure</em>. If a fatal failure occurs, it aborts the
current function; otherwise the program continues normally.</p>
<p><em>Tests</em> use assertions to verify the tested code's behavior. If a test crashes
or has a failed assertion, then it <em>fails</em>; otherwise it <em>succeeds</em>.</p>
<p>A <em>test suite</em> contains one or many tests. You should group your tests into test
suites that reflect the structure of the tested code. When multiple tests in a
test suite need to share common objects and subroutines, you can put them into a
<em>test fixture</em> class.</p>
<p>A <em>test program</em> can contain multiple test suites.</p>
<p>We'll now explain how to write a test program, starting at the individual
assertion level and building up to tests and test suites.</p>
<h2 id="assertions">Assertions</h2>
<p>googletest assertions are macros that resemble function calls. You test a class
or function by making assertions about its behavior. When an assertion fails,
googletest prints the assertion's source file and line number location, along
with a failure message. You may also supply a custom failure message which will
be appended to googletest's message.</p>
<p>The assertions come in pairs that test the same thing but have different effects
on the current function. <code>ASSERT_*</code> versions generate fatal failures when they
fail, and <strong>abort the current function</strong>. <code>EXPECT_*</code> versions generate nonfatal
failures, which don't abort the current function. Usually <code>EXPECT_*</code> are
preferred, as they allow more than one failure to be reported in a test.
However, you should use <code>ASSERT_*</code> if it doesn't make sense to continue when the
assertion in question fails.</p>
<p>Since a failed <code>ASSERT_*</code> returns from the current function immediately,
possibly skipping clean-up code that comes after it, it may cause a space leak.
Depending on the nature of the leak, it may or may not be worth fixing - so keep
this in mind if you get a heap checker error in addition to assertion errors.</p>
<p>To provide a custom failure message, simply stream it into the macro using the
<code>&lt;&lt;</code> operator or a sequence of such operators. An example:</p>
<div class="highlight"><pre><span></span><code><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">y</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Vectors x and y are of unequal length&quot;</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Vectors x and y differ at index &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>Anything that can be streamed to an <code>ostream</code> can be streamed to an assertion
macro--in particular, C strings and <code>string</code> objects. If a wide string
(<code>wchar_t*</code>, <code>TCHAR*</code> in <code>UNICODE</code> mode on Windows, or <code>std::wstring</code>) is
streamed to an assertion, it will be translated to UTF-8 when printed.</p>
<h3 id="basic-assertions">Basic Assertions</h3>
<p>These assertions do basic true/false condition testing.</p>
<table>
<thead>
<tr>
<th>Fatal assertion</th>
<th>Nonfatal assertion</th>
<th>Verifies</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ASSERT_TRUE(condition);</code></td>
<td><code>EXPECT_TRUE(condition);</code></td>
<td><code>condition</code> is true</td>
</tr>
<tr>
<td><code>ASSERT_FALSE(condition);</code></td>
<td><code>EXPECT_FALSE(condition);</code></td>
<td><code>condition</code> is false</td>
</tr>
</tbody>
</table>
<p>Remember, when they fail, <code>ASSERT_*</code> yields a fatal failure and returns from the
current function, while <code>EXPECT_*</code> yields a nonfatal failure, allowing the
function to continue running. In either case, an assertion failure means its
containing test fails.</p>
<p><strong>Availability</strong>: Linux, Windows, Mac.</p>
<h3 id="binary-comparison">Binary Comparison</h3>
<p>This section describes assertions that compare two values.</p>
<table>
<thead>
<tr>
<th>Fatal assertion</th>
<th>Nonfatal assertion</th>
<th>Verifies</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ASSERT_EQ(val1, val2);</code></td>
<td><code>EXPECT_EQ(val1, val2);</code></td>
<td><code>val1 == val2</code></td>
</tr>
<tr>
<td><code>ASSERT_NE(val1, val2);</code></td>
<td><code>EXPECT_NE(val1, val2);</code></td>
<td><code>val1 != val2</code></td>
</tr>
<tr>
<td><code>ASSERT_LT(val1, val2);</code></td>
<td><code>EXPECT_LT(val1, val2);</code></td>
<td><code>val1 &lt; val2</code></td>
</tr>
<tr>
<td><code>ASSERT_LE(val1, val2);</code></td>
<td><code>EXPECT_LE(val1, val2);</code></td>
<td><code>val1 &lt;= val2</code></td>
</tr>
<tr>
<td><code>ASSERT_GT(val1, val2);</code></td>
<td><code>EXPECT_GT(val1, val2);</code></td>
<td><code>val1 &gt; val2</code></td>
</tr>
<tr>
<td><code>ASSERT_GE(val1, val2);</code></td>
<td><code>EXPECT_GE(val1, val2);</code></td>
<td><code>val1 &gt;= val2</code></td>
</tr>
</tbody>
</table>
<p>Value arguments must be comparable by the assertion's comparison operator or
you'll get a compiler error. We used to require the arguments to support the
<code>&lt;&lt;</code> operator for streaming to an <code>ostream</code>, but this is no longer necessary. If
<code>&lt;&lt;</code> is supported, it will be called to print the arguments when the assertion
fails; otherwise googletest will attempt to print them in the best way it can.
For more details and how to customize the printing of the arguments, see the
<a href="cook_book.html#teaching-gmock-how-to-print-your-values">documentation</a>.</p>
<p>These assertions can work with a user-defined type, but only if you define the
corresponding comparison operator (e.g., <code>==</code> or <code>&lt;</code>). Since this is discouraged
by the Google
<a href="https://google.github.io/styleguide/cppguide.html#Operator_Overloading">C++ Style Guide</a>,
you may need to use <code>ASSERT_TRUE()</code> or <code>EXPECT_TRUE()</code> to assert the equality of
two objects of a user-defined type.</p>
<p>However, when possible, <code>ASSERT_EQ(actual, expected)</code> is preferred to
<code>ASSERT_TRUE(actual == expected)</code>, since it tells you <code>actual</code> and <code>expected</code>'s
values on failure.</p>
<p>Arguments are always evaluated exactly once. Therefore, it's OK for the
arguments to have side effects. However, as with any ordinary C/C++ function,
the arguments' evaluation order is undefined (i.e., the compiler is free to
choose any order), and your code should not depend on any particular argument
evaluation order.</p>
<p><code>ASSERT_EQ()</code> does pointer equality on pointers. If used on two C strings, it
tests if they are in the same memory location, not if they have the same value.
Therefore, if you want to compare C strings (e.g. <code>const char*</code>) by value, use
<code>ASSERT_STREQ()</code>, which will be described later on. In particular, to assert
that a C string is <code>NULL</code>, use <code>ASSERT_STREQ(c_string, NULL)</code>. Consider using
<code>ASSERT_EQ(c_string, nullptr)</code> if c++11 is supported. To compare two <code>string</code>
objects, you should use <code>ASSERT_EQ</code>.</p>
<p>When doing pointer comparisons use <code>*_EQ(ptr, nullptr)</code> and <code>*_NE(ptr, nullptr)</code>
instead of <code>*_EQ(ptr, NULL)</code> and <code>*_NE(ptr, NULL)</code>. This is because <code>nullptr</code> is
typed, while <code>NULL</code> is not. See the <a href="faq.html">FAQ</a> for more details.</p>
<p>If you're working with floating point numbers, you may want to use the floating
point variations of some of these macros in order to avoid problems caused by
rounding. See <a href="advanced.html">Advanced googletest Topics</a> for details.</p>
<p>Macros in this section work with both narrow and wide string objects (<code>string</code>
and <code>wstring</code>).</p>
<p><strong>Availability</strong>: Linux, Windows, Mac.</p>
<p><strong>Historical note</strong>: Before February 2016 <code>*_EQ</code> had a convention of calling it
as <code>ASSERT_EQ(expected, actual)</code>, so lots of existing code uses this order. Now
<code>*_EQ</code> treats both parameters in the same way.</p>
<h3 id="string-comparison">String Comparison</h3>
<p>The assertions in this group compare two <strong>C strings</strong>. If you want to compare
two <code>string</code> objects, use <code>EXPECT_EQ</code>, <code>EXPECT_NE</code>, and etc instead.</p>
<!-- mdformat off(github rendering does not support multiline tables) -->

<table>
<thead>
<tr>
<th>Fatal assertion</th>
<th>Nonfatal assertion</th>
<th>Verifies</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ASSERT_STREQ(str1,str2);</code></td>
<td><code>EXPECT_STREQ(str1,str2);</code></td>
<td>the two C strings have the same content</td>
</tr>
<tr>
<td><code>ASSERT_STRNE(str1,str2);</code></td>
<td><code>EXPECT_STRNE(str1,str2);</code></td>
<td>the two C strings have different contents</td>
</tr>
<tr>
<td><code>ASSERT_STRCASEEQ(str1,str2);</code></td>
<td><code>EXPECT_STRCASEEQ(str1,str2);</code></td>
<td>the two C strings have the same content, ignoring case</td>
</tr>
<tr>
<td><code>ASSERT_STRCASENE(str1,str2);</code></td>
<td><code>EXPECT_STRCASENE(str1,str2);</code></td>
<td>the two C strings have different contents, ignoring case</td>
</tr>
</tbody>
</table>
<!-- mdformat on-->

<p>Note that "CASE" in an assertion name means that case is ignored. A <code>NULL</code>
pointer and an empty string are considered <em>different</em>.</p>
<p><code>*STREQ*</code> and <code>*STRNE*</code> also accept wide C strings (<code>wchar_t*</code>). If a comparison
of two wide strings fails, their values will be printed as UTF-8 narrow strings.</p>
<p><strong>Availability</strong>: Linux, Windows, Mac.</p>
<p><strong>See also</strong>: For more string comparison tricks (substring, prefix, suffix, and
regular expression matching, for example), see <a href="advanced.html">this</a> in the
Advanced googletest Guide.</p>
<h2 id="simple-tests">Simple Tests</h2>
<p>To create a test:</p>
<ol>
<li>Use the <code>TEST()</code> macro to define and name a test function. These are
    ordinary C++ functions that don't return a value.</li>
<li>In this function, along with any valid C++ statements you want to include,
    use the various googletest assertions to check values.</li>
<li>The test's result is determined by the assertions; if any assertion in the
    test fails (either fatally or non-fatally), or if the test crashes, the
    entire test fails. Otherwise, it succeeds.</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="n">TEST</span><span class="p">(</span><span class="n">TestSuiteName</span><span class="p">,</span> <span class="n">TestName</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">...</span> <span class="n">test</span> <span class="n">body</span> <span class="p">...</span>
<span class="p">}</span>
</code></pre></div>

<p><code>TEST()</code> arguments go from general to specific. The <em>first</em> argument is the name
of the test suite, and the <em>second</em> argument is the test's name within the test
case. Both names must be valid C++ identifiers, and they should not contain
any underscores (<code>_</code>). A test's <em>full name</em> consists of its containing test suite and
its individual name. Tests from different test suites can have the same
individual name.</p>
<p>For example, let's take a simple integer function:</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="nf">Factorial</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">);</span>  <span class="c1">// Returns the factorial of n</span>
</code></pre></div>

<p>A test suite for this function might look like:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Tests factorial of 0.</span>
<span class="n">TEST</span><span class="p">(</span><span class="n">FactorialTest</span><span class="p">,</span> <span class="n">HandlesZeroInput</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">Factorial</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Tests factorial of positive numbers.</span>
<span class="n">TEST</span><span class="p">(</span><span class="n">FactorialTest</span><span class="p">,</span> <span class="n">HandlesPositiveInput</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">Factorial</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">);</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">Factorial</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">Factorial</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="mi">6</span><span class="p">);</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">Factorial</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span> <span class="mi">40320</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>

<p>googletest groups the test results by test suites, so logically related tests
should be in the same test suite; in other words, the first argument to their
<code>TEST()</code> should be the same. In the above example, we have two tests,
<code>HandlesZeroInput</code> and <code>HandlesPositiveInput</code>, that belong to the same test
suite <code>FactorialTest</code>.</p>
<p>When naming your test suites and tests, you should follow the same convention as
for
<a href="https://google.github.io/styleguide/cppguide.html#Function_Names">naming functions and classes</a>.</p>
<p><strong>Availability</strong>: Linux, Windows, Mac.</p>
<h2 id="same-data-multiple-tests">Test Fixtures: Using the Same Data Configuration for Multiple Tests</h2>
<p>If you find yourself writing two or more tests that operate on similar data, you
can use a <em>test fixture</em>. This allows you to reuse the same configuration of
objects for several different tests.</p>
<p>To create a fixture:</p>
<ol>
<li>Derive a class from <code>::testing::Test</code> . Start its body with <code>protected:</code>, as
    we'll want to access fixture members from sub-classes.</li>
<li>Inside the class, declare any objects you plan to use.</li>
<li>If necessary, write a default constructor or <code>SetUp()</code> function to prepare
    the objects for each test. A common mistake is to spell <code>SetUp()</code> as
    <strong><code>Setup()</code></strong> with a small <code>u</code> - Use <code>override</code> in C++11 to make sure you
    spelled it correctly.</li>
<li>If necessary, write a destructor or <code>TearDown()</code> function to release any
    resources you allocated in <code>SetUp()</code> . To learn when you should use the
    constructor/destructor and when you should use <code>SetUp()/TearDown()</code>, read
    the <a href="faq.html#CtorVsSetUp">FAQ</a>.</li>
<li>If needed, define subroutines for your tests to share.</li>
</ol>
<p>When using a fixture, use <code>TEST_F()</code> instead of <code>TEST()</code> as it allows you to
access objects and subroutines in the test fixture:</p>
<div class="highlight"><pre><span></span><code><span class="n">TEST_F</span><span class="p">(</span><span class="n">TestFixtureName</span><span class="p">,</span> <span class="n">TestName</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">...</span> <span class="n">test</span> <span class="n">body</span> <span class="p">...</span>
<span class="p">}</span>
</code></pre></div>

<p>Like <code>TEST()</code>, the first argument is the test suite name, but for <code>TEST_F()</code>
this must be the name of the test fixture class. You've probably guessed: <code>_F</code>
is for fixture.</p>
<p>Unfortunately, the C++ macro system does not allow us to create a single macro
that can handle both types of tests. Using the wrong macro causes a compiler
error.</p>
<p>Also, you must first define a test fixture class before using it in a
<code>TEST_F()</code>, or you'll get the compiler error "<code>virtual outside class
declaration</code>".</p>
<p>For each test defined with <code>TEST_F()</code>, googletest will create a <em>fresh</em> test
fixture at runtime, immediately initialize it via <code>SetUp()</code>, run the test,
clean up by calling <code>TearDown()</code>, and then delete the test fixture. Note that
different tests in the same test suite have different test fixture objects, and
googletest always deletes a test fixture before it creates the next one.
googletest does <strong>not</strong> reuse the same test fixture for multiple tests. Any
changes one test makes to the fixture do not affect other tests.</p>
<p>As an example, let's write tests for a FIFO queue class named <code>Queue</code>, which has
the following interface:</p>
<div class="highlight"><pre><span></span><code><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="nc">E</span><span class="o">&gt;</span>  <span class="c1">// E is the element type.</span>
<span class="k">class</span> <span class="nc">Queue</span> <span class="p">{</span>
 <span class="k">public</span><span class="o">:</span>
  <span class="n">Queue</span><span class="p">();</span>
  <span class="kt">void</span> <span class="nf">Enqueue</span><span class="p">(</span><span class="k">const</span> <span class="n">E</span><span class="o">&amp;</span> <span class="n">element</span><span class="p">);</span>
  <span class="n">E</span><span class="o">*</span> <span class="nf">Dequeue</span><span class="p">();</span>  <span class="c1">// Returns NULL if the queue is empty.</span>
  <span class="kt">size_t</span> <span class="nf">size</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
  <span class="p">...</span>
<span class="p">};</span>
</code></pre></div>

<p>First, define a fixture class. By convention, you should give it the name
<code>FooTest</code> where <code>Foo</code> is the class being tested.</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">QueueTest</span> <span class="o">:</span> <span class="k">public</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">Test</span> <span class="p">{</span>
 <span class="k">protected</span><span class="o">:</span>
  <span class="kt">void</span> <span class="n">SetUp</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
     <span class="n">q1_</span><span class="p">.</span><span class="n">Enqueue</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
     <span class="n">q2_</span><span class="p">.</span><span class="n">Enqueue</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
     <span class="n">q2_</span><span class="p">.</span><span class="n">Enqueue</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// void TearDown() override {}</span>

  <span class="n">Queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">q0_</span><span class="p">;</span>
  <span class="n">Queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">q1_</span><span class="p">;</span>
  <span class="n">Queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">q2_</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div>

<p>In this case, <code>TearDown()</code> is not needed since we don't have to clean up after
each test, other than what's already done by the destructor.</p>
<p>Now we'll write tests using <code>TEST_F()</code> and this fixture.</p>
<div class="highlight"><pre><span></span><code><span class="n">TEST_F</span><span class="p">(</span><span class="n">QueueTest</span><span class="p">,</span> <span class="n">IsEmptyInitially</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">q0_</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">QueueTest</span><span class="p">,</span> <span class="n">DequeueWorks</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span><span class="o">*</span> <span class="n">n</span> <span class="o">=</span> <span class="n">q0_</span><span class="p">.</span><span class="n">Dequeue</span><span class="p">();</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="k">nullptr</span><span class="p">);</span>

  <span class="n">n</span> <span class="o">=</span> <span class="n">q1_</span><span class="p">.</span><span class="n">Dequeue</span><span class="p">();</span>
  <span class="n">ASSERT_NE</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="k">nullptr</span><span class="p">);</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="o">*</span><span class="n">n</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">q1_</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
  <span class="k">delete</span> <span class="n">n</span><span class="p">;</span>

  <span class="n">n</span> <span class="o">=</span> <span class="n">q2_</span><span class="p">.</span><span class="n">Dequeue</span><span class="p">();</span>
  <span class="n">ASSERT_NE</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="k">nullptr</span><span class="p">);</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="o">*</span><span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">q2_</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span> <span class="mi">1</span><span class="p">);</span>
  <span class="k">delete</span> <span class="n">n</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p>The above uses both <code>ASSERT_*</code> and <code>EXPECT_*</code> assertions. The rule of thumb is
to use <code>EXPECT_*</code> when you want the test to continue to reveal more errors after
the assertion failure, and use <code>ASSERT_*</code> when continuing after failure doesn't
make sense. For example, the second assertion in the <code>Dequeue</code> test is
<code>ASSERT_NE(nullptr, n)</code>, as we need to dereference the pointer <code>n</code> later, which
would lead to a segfault when <code>n</code> is <code>NULL</code>.</p>
<p>When these tests run, the following happens:</p>
<ol>
<li>googletest constructs a <code>QueueTest</code> object (let's call it <code>t1</code>).</li>
<li><code>t1.SetUp()</code> initializes <code>t1</code>.</li>
<li>The first test (<code>IsEmptyInitially</code>) runs on <code>t1</code>.</li>
<li><code>t1.TearDown()</code> cleans up after the test finishes.</li>
<li><code>t1</code> is destructed.</li>
<li>The above steps are repeated on another <code>QueueTest</code> object, this time
    running the <code>DequeueWorks</code> test.</li>
</ol>
<p><strong>Availability</strong>: Linux, Windows, Mac.</p>
<h2 id="invoking-the-tests">Invoking the Tests</h2>
<p><code>TEST()</code> and <code>TEST_F()</code> implicitly register their tests with googletest. So,
unlike with many other C++ testing frameworks, you don't have to re-list all
your defined tests in order to run them.</p>
<p>After defining your tests, you can run them with <code>RUN_ALL_TESTS()</code>, which
returns <code>0</code> if all the tests are successful, or <code>1</code> otherwise. Note that
<code>RUN_ALL_TESTS()</code> runs <em>all tests</em> in your link unit--they can be from
different test suites, or even different source files.</p>
<p>When invoked, the <code>RUN_ALL_TESTS()</code> macro:</p>
<ul>
<li>
<p>Saves the state of all googletest flags.</p>
</li>
<li>
<p>Creates a test fixture object for the first test.</p>
</li>
<li>
<p>Initializes it via <code>SetUp()</code>.</p>
</li>
<li>
<p>Runs the test on the fixture object.</p>
</li>
<li>
<p>Cleans up the fixture via <code>TearDown()</code>.</p>
</li>
<li>
<p>Deletes the fixture.</p>
</li>
<li>
<p>Restores the state of all googletest flags.</p>
</li>
<li>
<p>Repeats the above steps for the next test, until all tests have run.</p>
</li>
</ul>
<p>If a fatal failure happens the subsequent steps will be skipped.</p>
<blockquote>
<p>IMPORTANT: You must <strong>not</strong> ignore the return value of <code>RUN_ALL_TESTS()</code>, or
you will get a compiler error. The rationale for this design is that the
automated testing service determines whether a test has passed based on its
exit code, not on its stdout/stderr output; thus your <code>main()</code> function must
return the value of <code>RUN_ALL_TESTS()</code>.</p>
<p>Also, you should call <code>RUN_ALL_TESTS()</code> only <strong>once</strong>. Calling it more than
once conflicts with some advanced googletest features (e.g., thread-safe
<a href="advanced.html#death-tests">death tests</a>) and thus is not supported.</p>
</blockquote>
<p><strong>Availability</strong>: Linux, Windows, Mac.</p>
<h2 id="writing-the-main-function">Writing the main() Function</h2>
<p>Write your own main() function, which should return the value of
<code>RUN_ALL_TESTS()</code>.</p>
<p>You can start from this boilerplate:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&quot;this/package/foo.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;gtest/gtest.h&quot;</span><span class="cp"></span>

<span class="k">namespace</span> <span class="p">{</span>

<span class="c1">// The fixture for testing class Foo.</span>
<span class="k">class</span> <span class="nc">FooTest</span> <span class="o">:</span> <span class="k">public</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">Test</span> <span class="p">{</span>
 <span class="k">protected</span><span class="o">:</span>
  <span class="c1">// You can remove any or all of the following functions if its body</span>
  <span class="c1">// is empty.</span>

  <span class="n">FooTest</span><span class="p">()</span> <span class="p">{</span>
     <span class="c1">// You can do set-up work for each test here.</span>
  <span class="p">}</span>

  <span class="o">~</span><span class="n">FooTest</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
     <span class="c1">// You can do clean-up work that doesn&#39;t throw exceptions here.</span>
  <span class="p">}</span>

  <span class="c1">// If the constructor and destructor are not enough for setting up</span>
  <span class="c1">// and cleaning up each test, you can define the following methods:</span>

  <span class="kt">void</span> <span class="n">SetUp</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
     <span class="c1">// Code here will be called immediately after the constructor (right</span>
     <span class="c1">// before each test).</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">TearDown</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
     <span class="c1">// Code here will be called immediately after each test (right</span>
     <span class="c1">// before the destructor).</span>
  <span class="p">}</span>

  <span class="c1">// Objects declared here can be used by all tests in the test suite for Foo.</span>
<span class="p">};</span>

<span class="c1">// Tests that the Foo::Bar() method does Abc.</span>
<span class="n">TEST_F</span><span class="p">(</span><span class="n">FooTest</span><span class="p">,</span> <span class="n">MethodBarDoesAbc</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">input_filepath</span> <span class="o">=</span> <span class="s">&quot;this/package/testdata/myinputfile.dat&quot;</span><span class="p">;</span>
  <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">output_filepath</span> <span class="o">=</span> <span class="s">&quot;this/package/testdata/myoutputfile.dat&quot;</span><span class="p">;</span>
  <span class="n">Foo</span> <span class="n">f</span><span class="p">;</span>
  <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">Bar</span><span class="p">(</span><span class="n">input_filepath</span><span class="p">,</span> <span class="n">output_filepath</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Tests that Foo does Xyz.</span>
<span class="n">TEST_F</span><span class="p">(</span><span class="n">FooTest</span><span class="p">,</span> <span class="n">DoesXyz</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Exercises the Xyz feature of Foo.</span>
<span class="p">}</span>

<span class="p">}</span>  <span class="c1">// namespace</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
  <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">InitGoogleTest</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
  <span class="k">return</span> <span class="nf">RUN_ALL_TESTS</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>

<p>The <code>::testing::InitGoogleTest()</code> function parses the command line for
googletest flags, and removes all recognized flags. This allows the user to
control a test program's behavior via various flags, which we'll cover in
the <a href="advanced.html">AdvancedGuide</a>. You <strong>must</strong> call this function before calling
<code>RUN_ALL_TESTS()</code>, or the flags won't be properly initialized.</p>
<p>On Windows, <code>InitGoogleTest()</code> also works with wide strings, so it can be used
in programs compiled in <code>UNICODE</code> mode as well.</p>
<p>But maybe you think that writing all those main() functions is too much work? We
agree with you completely, and that's why Google Test provides a basic
implementation of main(). If it fits your needs, then just link your test with
gtest_main library and you are good to go.</p>
<p>NOTE: <code>ParseGUnitFlags()</code> is deprecated in favor of <code>InitGoogleTest()</code>.</p>
<h2 id="known-limitations">Known Limitations</h2>
<ul>
<li>Google Test is designed to be thread-safe. The implementation is thread-safe
    on systems where the <code>pthreads</code> library is available. It is currently
    <em>unsafe</em> to use Google Test assertions from two threads concurrently on
    other systems (e.g. Windows). In most tests this is not an issue as usually
    the assertions are done in the main thread. If you want to help, you can
    volunteer to implement the necessary synchronization primitives in
    <code>gtest-port.h</code> for your platform.</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright © 2020 Qualcomm Technologies Inc. All rights reserved.
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.77e55a48.min.js"></script>
      <script src="../../../assets/javascripts/bundle.9554a270.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
       
<script src="../../../js/iframe-worker.js"></script>
<script src="../../../search/search_index.js"></script>
 
      <script>
        app = initialize({
          base: "../../..",
          features: [],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../../js/mermaid.min.js"></script>
      
    
  </body>
</html>