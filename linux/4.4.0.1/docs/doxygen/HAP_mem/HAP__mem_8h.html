<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>HAPMEM: HAP_mem.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HAPMEM
   </div>
   <div id="projectbrief">HAP Memory Allocator</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('HAP__mem_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">HAP_mem.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>HAP Memory APIs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;AEEStdDef.h&quot;</code><br />
<code>#include &quot;AEEStdErr.h&quot;</code><br />
</div>
<p><a href="HAP__mem_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structHAP__mem__stats.html">HAP_mem_stats</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Statistics of user heap memory.  <a href="structHAP__mem__stats.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">HAP_PROT</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These macros define the permissions on memory block described by the file descriptor.</p>
<p>It is passed as input parameter 'prot' to <a class="el" href="HAP__mem_8h.html#a7f0db933920418adb9d881a93ec68ead">HAP_mmap()</a>. These can be ORed to set the required permissions. </p>
</div></td></tr>
<tr class="memitem:a7ed9e8d4688893b6cfdc05d9d87648ab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7ed9e8d4688893b6cfdc05d9d87648ab"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#a7ed9e8d4688893b6cfdc05d9d87648ab">HAP_PROT_NONE</a>&#160;&#160;&#160;0x00    /* no permissions */</td></tr>
<tr class="memdesc:a7ed9e8d4688893b6cfdc05d9d87648ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Passing HAP_PROT_NONE as input results in setting 'NO' permissions on the buffer. <br /></td></tr>
<tr class="separator:a7ed9e8d4688893b6cfdc05d9d87648ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2e834abecc9f43340bc8577bfe7bd8e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac2e834abecc9f43340bc8577bfe7bd8e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#ac2e834abecc9f43340bc8577bfe7bd8e">HAP_PROT_READ</a>&#160;&#160;&#160;0x01    /* pages can be read */</td></tr>
<tr class="memdesc:ac2e834abecc9f43340bc8577bfe7bd8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Passing HAP_PROT_READ as input results in setting 'Read' permissions on the buffer. <br /></td></tr>
<tr class="separator:ac2e834abecc9f43340bc8577bfe7bd8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4595104ad91ac1c861896378c45660eb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4595104ad91ac1c861896378c45660eb"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#a4595104ad91ac1c861896378c45660eb">HAP_PROT_WRITE</a>&#160;&#160;&#160;0x02    /* pages can be written */</td></tr>
<tr class="memdesc:a4595104ad91ac1c861896378c45660eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Passing HAP_PROT_WRITE as input results in setting 'Write' permissions on the buffer. <br /></td></tr>
<tr class="separator:a4595104ad91ac1c861896378c45660eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad895d92a25765dd924c95173734af4d5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad895d92a25765dd924c95173734af4d5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#ad895d92a25765dd924c95173734af4d5">HAP_PROT_EXEC</a>&#160;&#160;&#160;0x04    /* pages can be executed */</td></tr>
<tr class="memdesc:ad895d92a25765dd924c95173734af4d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Passing HAP_PROT_EXEC as input results in setting 'Execute' permissions on the buffer. Currently not supported. <br /></td></tr>
<tr class="separator:ad895d92a25765dd924c95173734af4d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">HAP_MEM_CACHE</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>These macros define the cache policies for mapping memory pages to DSP MMU. Default cache policy is cache writeback.</p>
<p>It is passed as input parameter 'prot', or-ed with page protections to <a class="el" href="HAP__mem_8h.html#a7f0db933920418adb9d881a93ec68ead">HAP_mmap()</a>. </p>
</div></td></tr>
<tr class="memitem:ad2d51ba1c2916f8bcfb3605c73f77639"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad2d51ba1c2916f8bcfb3605c73f77639"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#ad2d51ba1c2916f8bcfb3605c73f77639">HAP_MEM_CACHE_WRITEBACK</a>&#160;&#160;&#160;(0x10)    /* cache write back */</td></tr>
<tr class="memdesc:ad2d51ba1c2916f8bcfb3605c73f77639"><td class="mdescLeft">&#160;</td><td class="mdescRight">Passing HAP_MEM_CACHE_WRITEBACK as input results in mapping memory as cache writeback. <br /></td></tr>
<tr class="separator:ad2d51ba1c2916f8bcfb3605c73f77639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea2135fa5ece46e91184c0a1b522330e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aea2135fa5ece46e91184c0a1b522330e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#aea2135fa5ece46e91184c0a1b522330e">HAP_MEM_CACHE_NON_SHARED</a>&#160;&#160;&#160;(0x20)    /* normal uncached memory */</td></tr>
<tr class="memdesc:aea2135fa5ece46e91184c0a1b522330e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Passing HAP_MEM_CACHE_NON_SHARED as input results in mapping memory as uncached. <br /></td></tr>
<tr class="separator:aea2135fa5ece46e91184c0a1b522330e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69eca4198d64bb7d2b981ee9435a4f3f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a69eca4198d64bb7d2b981ee9435a4f3f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#a69eca4198d64bb7d2b981ee9435a4f3f">HAP_MEM_CACHE_WRITETHROUGH</a>&#160;&#160;&#160;(0x40)    /* write through memory */</td></tr>
<tr class="memdesc:a69eca4198d64bb7d2b981ee9435a4f3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Passing HAP_MEM_CACHE_WRITETHROUGH as input results in mapping memory as cache write through. <br /></td></tr>
<tr class="separator:a69eca4198d64bb7d2b981ee9435a4f3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a95df9fa3fb6a9658a5dbd61ecbe5f6c2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#a95df9fa3fb6a9658a5dbd61ecbe5f6c2">HAP_malloc</a> (uint32 bytes, void **pptr)</td></tr>
<tr class="separator:a95df9fa3fb6a9658a5dbd61ecbe5f6c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cbf154c1a894566432af06b420ab493"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#a6cbf154c1a894566432af06b420ab493">HAP_free</a> (void *ptr)</td></tr>
<tr class="separator:a6cbf154c1a894566432af06b420ab493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73a44a4e95750c7c7eb702ce43843f59"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#a73a44a4e95750c7c7eb702ce43843f59">HAP_mem_get_stats</a> (struct <a class="el" href="structHAP__mem__stats.html">HAP_mem_stats</a> *stats)</td></tr>
<tr class="separator:a73a44a4e95750c7c7eb702ce43843f59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b3e5ea727196136d09d99970b1c4393"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#a6b3e5ea727196136d09d99970b1c4393">HAP_mem_set_grow_size</a> (uint64 min, uint64 max)</td></tr>
<tr class="separator:a6b3e5ea727196136d09d99970b1c4393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a769902041dcd9709c94d32c4cdcd1f1d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#a769902041dcd9709c94d32c4cdcd1f1d">HAP_mem_set_heap_thresholds</a> (unsigned int low_largest_block_size, unsigned int high_largest_block_size)</td></tr>
<tr class="separator:a769902041dcd9709c94d32c4cdcd1f1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f0db933920418adb9d881a93ec68ead"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#a7f0db933920418adb9d881a93ec68ead">HAP_mmap</a> (void *addr, int len, int prot, int flags, int fd, long offset)</td></tr>
<tr class="separator:a7f0db933920418adb9d881a93ec68ead"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8be32dca351de1bd0b495aae1bbae812"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#a8be32dca351de1bd0b495aae1bbae812">HAP_munmap</a> (void *addr, int len)</td></tr>
<tr class="separator:a8be32dca351de1bd0b495aae1bbae812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a151e061f8df8eb848ee3b1c7c67c33c1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#a151e061f8df8eb848ee3b1c7c67c33c1">HAP_mmap_get</a> (int fd, void **vaddr, uint64 *paddr)</td></tr>
<tr class="separator:a151e061f8df8eb848ee3b1c7c67c33c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a189c5db0e73ceee1b3ab6059be22d76e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#a189c5db0e73ceee1b3ab6059be22d76e">HAP_mmap_put</a> (int fd)</td></tr>
<tr class="separator:a189c5db0e73ceee1b3ab6059be22d76e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae72374525c240a82a903f9488e7ad442"><td class="memItemLeft" align="right" valign="top">uint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="HAP__mem_8h.html#ae72374525c240a82a903f9488e7ad442">HAP_mem_available_stack</a> ()</td></tr>
<tr class="separator:ae72374525c240a82a903f9488e7ad442"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>HAP Memory APIs. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a6cbf154c1a894566432af06b420ab493"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int HAP_free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Free the memory block allocated through <a class="el" href="HAP__mem_8h.html#a95df9fa3fb6a9658a5dbd61ecbe5f6c2">HAP_malloc()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>pointer to the memory block </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int AEE_EBADCLASS if ptr is NULL AEE_SUCCESS if ptr is not NULL </dd></dl>

</div>
</div>
<a class="anchor" id="a95df9fa3fb6a9658a5dbd61ecbe5f6c2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int HAP_malloc </td>
          <td>(</td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>pptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Allocate a block of memory. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bytes</td><td>size of memory block in bytes. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pptr</td><td>pointer to the memory block </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int AEE_SUCCESS for success and AEE_ENOMEMORY for failure. </dd></dl>

</div>
</div>
<a class="anchor" id="ae72374525c240a82a903f9488e7ad442"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64 HAP_mem_available_stack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the stack size (in bytes) available for current thread Supported only on Lahaina and Cedros </p><dl class="section return"><dt>Returns</dt><dd>available stack for current thread, on success AEE_EINVALIDTHREAD if unable to get current thread id AEE_ERESOURCENOTFOUND if unable to get stack for current thread </dd></dl>

</div>
</div>
<a class="anchor" id="a73a44a4e95750c7c7eb702ce43843f59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int HAP_mem_get_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structHAP__mem__stats.html">HAP_mem_stats</a> *&#160;</td>
          <td class="paramname"><em>stats</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the current statistics from the heap.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">stats</td><td>pointer to stats structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">AEE_SUCCESS</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6b3e5ea727196136d09d99970b1c4393"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int HAP_mem_set_grow_size </td>
          <td>(</td>
          <td class="paramtype">uint64&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the minimum and maximum size by which the user heap should grow when it is exhausted and needs to add memory from the HLOS on the Apps processor.</p>
<p>This API allows to configure the minimum and maximum size that should be added to the DSP user heap when an allocation fails and more memory needs to be obtained from the HLOS. Using this API is optional. If not used, the runtime will try to choose reasonable growth sizes based on allocation history.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">min</td><td>minimum bytes to grow the heap by when requesting a new segment </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max</td><td>maximum bytes to grow the heap by when requesting a new segment </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">AEE_SUCCESS</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a769902041dcd9709c94d32c4cdcd1f1d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int HAP_mem_set_heap_thresholds </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>low_largest_block_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>high_largest_block_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set low and high memory thresholds for heap</p>
<p>Thresholds must be tuned according to the memory requirements</p>
<p>Improper thresholds might led to heap failure</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">low_largest_block_size</td><td>(in bytes) - the heap will grow if size of the largest free block is less than this threshold. Currently, setting this parameter will have no impact on the heap. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">high_largest_block_size</td><td>(in bytes) - the heap manager will release all unused sections if size of the largest free block is greater than this threshold. The recommended value for this, is the size of largest single allocation possible in your application. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>AEE_SUCCESS on success AEE_EBADPARM on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a7f0db933920418adb9d881a93ec68ead"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* HAP_mmap </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>prot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Map buffer associated with the file descriptor to DSP memory. The reference count gets incremented if the file descriptor is already mapped.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>mapping at fixed address, not supported currently. This has to be set to NULL </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>size of the buffer to be mapped </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">prot</td><td>protection flags - supported are only HAP_PROT_READ and HAP_PROT_WRITE. HAP_PROT_EXEC is not supported </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>HAP_MAP_NO_MAP - Increment reference count with no mapping 0 - map the buffer and increment the reference count </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>file descriptor for the buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>offset into the buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">mapped</td><td>address -1 on failure </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a151e061f8df8eb848ee3b1c7c67c33c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int HAP_mmap_get </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>vaddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64 *&#160;</td>
          <td class="paramname"><em>paddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get virtual and physical address associated with the buffer and increments the reference count.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>file descriptor for the buffer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">vaddr</td><td>virtual address associated with the buffer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">paddr</td><td>physical address associated with the buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success AEE_ENOSUCHMAP if fd is invalid </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a189c5db0e73ceee1b3ab6059be22d76e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int HAP_mmap_put </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Decrements the reference count of the file descriptor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fd</td><td>file descriptor of the buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success AEE_ENOSUCHMAP if fd is invalid AEE_EBADMAPREFCNT if map refcount is &lt;=0 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8be32dca351de1bd0b495aae1bbae812"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int HAP_munmap </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Decrements the reference count and unmaps the buffer from memory if the reference count goes to 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>mapped address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>size of the mapped buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success AEE_NOSUCHMAP in input addr is invalid </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_a017a576ec58501fa2282aa4c0d388ec.html">incs</a></li><li class="navelem"><a class="el" href="HAP__mem_8h.html">HAP_mem.h</a></li>
    <li class="footer">Copyright © 2020 Qualcomm Technologies Inc. All rights reserved.  Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
