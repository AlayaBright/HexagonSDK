<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Remote Interface: Remote session API to interface with FastRPC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Remote Interface
   </div>
   <div id="projectbrief">Remote API</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Remote session API to interface with FastRPC </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>APIs for non-windows targets are present in <a class="el" href="remote__default_8h.html">remote_default.h</a> For Windows targets, refer to remote_windows.h, which is part of the WOS add-on.</p>
<h2>Overview</h2>
<p>FastRPC exposes a set of APIs enabling the following functionality:</p>
<ul>
<li>open, configure and close a remote session on the DSP</li>
<li>enable unsigned PD offload to the compute DSP</li>
<li>enable and manage QoS mode</li>
<li>make synchronous or asynchronous remote calls</li>
<li>query DSP capabilities</li>
<li>map or unmap pages onto the DSP</li>
</ul>
<p>The 64-bit version of the API (<code>handle64</code>) enables multi-domain modules. It is recommended for applications to use the multi-domain framework, which provides multiple benefits over the older single-domain framework. remote_handle_* APIs should be used for single-domain applications. For more information on multi-domain support, refer to the RPC section in the Hexagon SDK documentation.</p>
<h1><code>remote_handle_open</code>, <code>remote_handle64_open</code></h1>
<p>Loads the shared object on the remote process domain.</p>
<h1><code>remote_handle_invoke</code>, <code>remote_handle64_invoke</code></h1>
<p>Executes a process on the remote domain.</p>
<h1><code>remote_handle_close</code>, <code>remote_handle64_close</code></h1>
<p>Closes the remote handle opened by the remote process.</p>
<h1><code>remote_handle_control</code>, <code>remote_handle64_control</code></h1>
<p>Manages the remote session. This API allows to control or query the remote session:</p><ul>
<li><p class="startli">Control latency The user can vote for a specific latency requirement per session. This latency is not guaranteed by the driver. The driver will try to meet this requirement with the options available on a given target. Based on the arguments, either PM-QoS [Power Management] or adaptive QoS can be enabled.</p>
<p class="startli">PM-QoS is recommended for latency-sensitive use cases, whereas adaptive QoS is recommended for moderately latency-sensitive use cases. Adaptive QoS is more power-efficient than PM-QoS.</p>
<p class="startli">If PM-QoS enabled, CPU low power modes will be disabled.</p>
<p class="startli">If Adaptive QoS is enabled, the remote DSP starts keeping track of the method execution times for that process. Once enough data is available, the DSP will try to predict when the method will finish executing and will send a "ping" to wake up the CPU prior to the completion of the DSP task so that there is no extra overhead due to CPU wakeup time.</p>
</li>
<li>Enable wake lock Keep the CPU up until a response from the remote invocation call is received. Disabling wake lock feature enables the CPU to be in suspend mode.</li>
<li>Query DSP Capabilities Queries DSP support for:<ul>
<li>domains available</li>
<li>unsigned PD</li>
<li>HVX, VTCM, HMX</li>
<li>async FastRPC</li>
<li>remote PD status notification</li>
</ul>
</li>
<li>Get DSP domain Returns the current DSP domain.</li>
</ul>
<h1><code>remote_session_control</code></h1>
<p>Sets remote session parameters such as thread stack size or unsigned PD mode. Enables to kill remote process, closes sessions on the DSP, generates a PD dump, or triggers remote process exceptions.</p>
<ul>
<li>Stack thread parameters Parameters to configure a thread: priority and stack size.</li>
<li>Unsigned PD Flag to configure the session as unsigned. This allows third party applications to run compute intensive tasks on the compute DSP for better performance.</li>
<li>Kill remote process Kills the remote process running on the DSP.</li>
<li>Session close Closes all sessions open on a given domain.</li>
<li>PD dump Enables PD dump feature.</li>
<li>Remote process exception Introduces an exception in the remote process.</li>
<li>Query process type Query the type of process (signed or unsigned) running on remote DSP.</li>
</ul>
<h1><code>fastrpc_mmap</code>, <code>fastrpc_munmap</code></h1>
<p>Creates a new mapping of an ION memory into the virtual address space of a remote process on the DSP and associates the mapping with the provided file descriptor. The parameter <code>flags</code> of type <code>fastrpc_map_flags</code> allows the user to control the page permissions and other properties of the memory map. These mappings can be destroyed with <code><a class="el" href="remote__default_8h.html#a6345d0855b4add69100ff444ed4834f9">fastrpc_munmap()</a></code> API using the file descriptor. APIs <code>fastrpc_mmap</code> and <code>fastrpc_munmap</code> are available and their use is recommended for Lahaina and later chipsets.</p>
<h1><code>remote_mem_map</code>, <code>remote_mem_unmap</code></h1>
<p>Maps/unmaps large buffers statically on a given DSP. Mapping the buffers statically saves the latency for the corresponding remote calls associated with these buffers. These APIs are available only on SM8250 (Kona) or later targets.</p>
<h1><code>remote_handle_invoke_async</code>, <code>remote_handle64_invoke_async</code></h1>
<p>Make remote invocations asynchronous. Running asynchronously does not improve the latency but improves the throughput by enabling the DSP to run successive tasks continuously. This feature is supported on Lahaina and onward targets.</p>
<h1><code>fastrpc_async_get_status</code></h1>
<p>Queries the status of the asynchronous job.</p>
<h1><code>fastrpc_release_async_job</code></h1>
<p>Releases the asynchronous job after receiving the status either through callback or poll.</p>
<h1><code>remote_register_buf</code>, <code>remote_register_buf_attr</code></h1>
<p>Registers a file descriptor for a buffer allocated with ION memory to share the memory with the DSP via SMMU.</p>
<h1><code>remote_register_dma_handle</code>, <code>remote_register_dma_handle_attr</code></h1>
<p>Registers a DMA handle allocated with ION memory to share the memory with the DSP via SMMU.</p>
<p>Header file: <b><a class="el" href="remote_8h.html" title="Header file with APIs to interface with FastRPC. ">remote.h</a></b> Header file: <b><a class="el" href="remote__default_8h.html">remote_default.h</a></b> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright © 2020 Qualcomm Technologies Inc. All rights reserved.  Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
